package dev.astroclient.client.feature.impl.exploits;

import dev.astroclient.client.event.impl.packet.EventReceivePacket;
import dev.astroclient.client.feature.Category;
import dev.astroclient.client.feature.ToggleableFeature;
import dev.astroclient.client.feature.annotation.Toggleable;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.server.S00PacketKeepAlive;
import awfdd.ksksk.zabejhf.rgsd.xasnfkj.zajjebf.Subscribe;

@Toggleable(label = "PingSpoof", category = Category.EXPLOITS)
public class PingSpoof extends ToggleableFeature {

    @Subscribe
    public void onEvent(EventReceivePacket eventReceivePacket) {
        if (eventReceivePacket.getPacket() instanceof S00PacketKeepAlive) {
            eventReceivePacket.setCancelled();
            mc.getNetHandler().getNetworkManager().sendPacket(new C00PacketKeepAlive(((S00PacketKeepAlive)eventReceivePacket.getPacket()).func_149134_c() + mc.getDebugFPS() / 2));
        }
    }
}
