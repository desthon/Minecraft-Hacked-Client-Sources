package rip.autumn.module.impl.exploit;

import me.zane.basicbus.api.annotations.Listener;
import net.minecraft.network.play.client.C00PacketKeepAlive;
import net.minecraft.network.play.server.S00PacketKeepAlive;
import rip.autumn.annotations.Label;
import rip.autumn.events.packet.ReceivePacketEvent;
import rip.autumn.events.packet.SendPacketEvent;
import rip.autumn.module.Module;
import rip.autumn.module.ModuleCategory;
import rip.autumn.module.annotations.Aliases;
import rip.autumn.module.annotations.Category;

@Label("Ping Spoof")
@Category(ModuleCategory.EXPLOIT)
@Aliases({"pingspoof", "pingspoofer", "fakelag"})
public final class PingSpoofMod extends Module {
   public void onEnabled() {
   }

   @Listener(SendPacketEvent.class)
   public final void onSendPacket(SendPacketEvent event) {
      if (event.getPacket() instanceof C00PacketKeepAlive) {
         event.setCancelled();
      }

   }

   @Listener(ReceivePacketEvent.class)
   public final void onReceive(ReceivePacketEvent event) {
      if (event.getPacket() instanceof S00PacketKeepAlive) {
         event.setCancelled();
         mc.getNetHandler().addToSendQueueSilent(new C00PacketKeepAlive());
      }

   }
}
