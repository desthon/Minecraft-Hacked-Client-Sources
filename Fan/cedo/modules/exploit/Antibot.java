package cedo.modules.exploit;

import cedo.Fan;
import cedo.events.Event;
import cedo.events.listeners.EventUpdate;
import cedo.modules.Module;
import cedo.settings.impl.ModeSetting;
import net.minecraft.client.gui.GuiPlayerTabOverlay;
import net.minecraft.entity.player.EntityPlayer;
import org.lwjgl.input.Keyboard;

import java.util.ArrayList;
import java.util.List;

@SuppressWarnings("rawtypes")
public class Antibot extends Module {
    ModeSetting mode = new ModeSetting("Mode", "Hypixel", "Hypixel", "Mineplex");

    public Antibot() {

        super("Antibot", Keyboard.KEY_NONE, Category.EXPLOIT);
        addSettings(mode);
    }

    public void onEvent(Event e) {
        if(Fan.targetHud.size.is("Script")){
            this.setSuffix("\247cMichealXF");
        }else
            this.setSuffix("");
        if (e instanceof EventUpdate && e.isPre()) {
            List<EntityPlayer> bots = new ArrayList<>();
            for (EntityPlayer player : mc.theWorld.playerEntities) {
                if (player == mc.thePlayer)
                    continue;

                if (mode.is("Mineplex")) {
                    player.getHealth();
                    if (player != mc.thePlayer) bots.add(player);
                } else if (mode.is("Hypixel")) {
                    if (!GuiPlayerTabOverlay.getPlayers().contains(player)) bots.add(player);

                }

            }
            bots.forEach(bot -> mc.theWorld.removeEntity(bot));
        }
    }
}