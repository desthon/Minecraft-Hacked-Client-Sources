package cedo.modules.exploit;

import cedo.events.Event;
import cedo.events.listeners.EventUpdate;
import cedo.modules.Module;
import net.minecraft.client.gui.GuiPlayerTabOverlay;
import net.minecraft.entity.player.EntityPlayer;
import org.lwjgl.input.Keyboard;

import java.util.ArrayList;
import java.util.List;

@SuppressWarnings("rawtypes")
public class Antibot extends Module {

    public Antibot() {

        super("Antibot", Keyboard.KEY_NONE, Category.EXPLOIT);
    }

    public void onEvent(Event e) {
        if (e instanceof EventUpdate && e.isPre()) {
            List<EntityPlayer> bots = new ArrayList<>();
            for (EntityPlayer player : mc.theWorld.playerEntities) {
                if (player == mc.thePlayer)
                    continue;
                if (!GuiPlayerTabOverlay.getPlayers().contains(player) && player.ticksExisted >= 20) bots.add(player);
            }
            bots.forEach(bot -> mc.theWorld.removeEntity(bot));
        }
    }
}